"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/http");
var http_2 = require("@angular/http");
var _1 = require("rxjs/");
var AppointmentService = (function () {
    function AppointmentService(http) {
        this.http = http;
        this.url = "https://tools.brandinstitute.com/wsbi/bimobile.asmx/getAppointments";
        this._appointments = new _1.BehaviorSubject([]);
        this.monthNames = ["Jan", "Febr", "Mar", "Apr", "May", "Jun",
            "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
        ];
        this._appointments = new _1.BehaviorSubject([]);
        this.appointments = this._appointments.asObservable();
    }
    AppointmentService.prototype.getAppointments = function () {
        var _this = this;
        var headers = new http_1.Headers({ 'content-type': 'application/x-www-form-urlencoded' });
        var body = new http_2.URLSearchParams();
        body.set('phoneId', "3057427989");
        body.set('phoneIdType', "1111111111");
        body.set('selDate', "10/16/2017");
        return this.http.post(this.url, body.toString(), { headers: headers }).map(function (res) {
            var data = res.json();
            res.json().map(function (obj) {
                var dateTime = new Date(obj.AppDate);
                obj.AppDate = dateTime.getDate().toString() + ',' + _this.monthNames[dateTime.getMonth()].toString() + '-' +
                    +((dateTime.getHours() + 24 - 2) % 24).toString() + ':'
                    + dateTime.getMinutes().toString() + ((dateTime.getHours() >= 12) ? " PM" : " AM").toString();
            });
            return data;
        });
    };
    AppointmentService.prototype.getAppointment = function (id) {
        return this.appointments.filter(function (appointment) { return appointment[0].AppDate === "10/16/2017"; })[0];
    };
    AppointmentService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.Http])
    ], AppointmentService);
    return AppointmentService;
}());
exports.AppointmentService = AppointmentService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwb2ludG1lbnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFwcG9pbnRtZW50LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzQ0FBMEM7QUFDMUMsc0NBQXdEO0FBQ3hELHNDQUErQztBQUMvQywwQkFBb0Q7QUFJcEQ7SUFVSSw0QkFBb0IsSUFBVTtRQUFWLFNBQUksR0FBSixJQUFJLENBQU07UUFUdEIsUUFBRyxHQUFHLHFFQUFxRSxDQUFBO1FBRTNFLGtCQUFhLEdBQW1DLElBQUksa0JBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUl0RSxlQUFVLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUs7WUFDL0QsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLO1NBQ3pDLENBQUM7UUFFRSxJQUFJLENBQUMsYUFBYSxHQUFtQyxJQUFJLGtCQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0UsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzFELENBQUM7SUFFRCw0Q0FBZSxHQUFmO1FBQUEsaUJBaUJDO1FBaEJHLElBQUksT0FBTyxHQUFHLElBQUksY0FBTyxDQUFDLEVBQUMsY0FBYyxFQUFFLG1DQUFtQyxFQUFDLENBQUMsQ0FBQztRQUNqRixJQUFJLElBQUksR0FBRyxJQUFJLHNCQUFlLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUVuQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBQSxHQUFHO1lBQ3pFLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUN0QixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQUMsR0FBUztnQkFDckIsSUFBSSxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNyQyxHQUFHLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxHQUFHLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxHQUFHO29CQUN4RyxDQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxHQUFHLEdBQUc7c0JBQ3RELFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBRTtZQUNwRyxDQUFDLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsMkNBQWMsR0FBZCxVQUFlLEVBQVU7UUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUEsV0FBVyxJQUFJLE9BQUEsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxZQUFZLEVBQXZDLENBQXVDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRixDQUFDO0lBcENRLGtCQUFrQjtRQUQ5QixpQkFBVSxFQUFFO3lDQVdpQixXQUFJO09BVnJCLGtCQUFrQixDQXFDOUI7SUFBRCx5QkFBQztDQUFBLEFBckNELElBcUNDO0FBckNZLGdEQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiXG5pbXBvcnQgeyBIdHRwLCBSZXNwb25zZSwgSGVhZGVycyB9IGZyb20gXCJAYW5ndWxhci9odHRwXCI7XG5pbXBvcnQgeyBVUkxTZWFyY2hQYXJhbXMgfSBmcm9tIFwiQGFuZ3VsYXIvaHR0cFwiXG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzLyc7XG5pbXBvcnQgeyBBcHBvaW50bWVudCB9IGZyb20gXCIuL2FwcG9pbnRtZW50Lm1vZGVsXCI7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBBcHBvaW50bWVudFNlcnZpY2Uge1xuICAgIHByaXZhdGUgdXJsID0gXCJodHRwczovL3Rvb2xzLmJyYW5kaW5zdGl0dXRlLmNvbS93c2JpL2JpbW9iaWxlLmFzbXgvZ2V0QXBwb2ludG1lbnRzXCJcbiAgICBwdWJsaWMgYXBwb2ludG1lbnRzOiBPYnNlcnZhYmxlPEFwcG9pbnRtZW50W10+O1xuICAgIHByaXZhdGUgX2FwcG9pbnRtZW50cyA9IDxCZWhhdmlvclN1YmplY3Q8QXBwb2ludG1lbnRbXT4+bmV3IEJlaGF2aW9yU3ViamVjdChbXSk7XG4gICAgcHJpdmF0ZSBkYXRhU3RvcmU6IHtcbiAgICAgICAgYXBwb2ludG1lbnRzOiBBcHBvaW50bWVudFtdXG4gICAgICB9O1xuICAgICAgcHJpdmF0ZSBtb250aE5hbWVzID0gW1wiSmFuXCIsIFwiRmViclwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLFxuICAgICAgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIlxuICAgIF07XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwKSB7IFxuICAgICAgICB0aGlzLl9hcHBvaW50bWVudHMgPSA8QmVoYXZpb3JTdWJqZWN0PEFwcG9pbnRtZW50W10+Pm5ldyBCZWhhdmlvclN1YmplY3QoW10pO1xuICAgICAgICB0aGlzLmFwcG9pbnRtZW50cyA9IHRoaXMuX2FwcG9pbnRtZW50cy5hc09ic2VydmFibGUoKTtcbiAgICB9XG5cbiAgICBnZXRBcHBvaW50bWVudHMoKTogT2JzZXJ2YWJsZTxBcnJheTxBcHBvaW50bWVudD4+IHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfSk7XG4gICAgICAgIGxldCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBib2R5LnNldCgncGhvbmVJZCcsIFwiMzA1NzQyNzk4OVwiKTtcbiAgICAgICAgYm9keS5zZXQoJ3Bob25lSWRUeXBlJywgXCIxMTExMTExMTExXCIpO1xuICAgICAgICBib2R5LnNldCgnc2VsRGF0ZScsIFwiMTAvMTYvMjAxN1wiKTtcblxuICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh0aGlzLnVybCwgYm9keS50b1N0cmluZygpLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSkubWFwKHJlcyA9PiB7ICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHJlcy5qc29uKCkubWFwKChvYmogOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0ZVRpbWUgPSBuZXcgRGF0ZShvYmouQXBwRGF0ZSk7XG4gICAgICAgICAgICAgICAgb2JqLkFwcERhdGUgPSBkYXRlVGltZS5nZXREYXRlKCkudG9TdHJpbmcoKSArICcsJyArIHRoaXMubW9udGhOYW1lc1tkYXRlVGltZS5nZXRNb250aCgpXS50b1N0cmluZygpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgKyAoKGRhdGVUaW1lLmdldEhvdXJzKCkgKyAyNCAtIDIpICUgMjQpLnRvU3RyaW5nKCkgKyAnOicgXG4gICAgICAgICAgICAgICAgICsgZGF0ZVRpbWUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgKyAoKGRhdGVUaW1lLmdldEhvdXJzKCkgPj0gMTIpID8gXCIgUE1cIiA6IFwiIEFNXCIpLnRvU3RyaW5nKCkgOyAgICAgICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0QXBwb2ludG1lbnQoaWQ6IG51bWJlcik6IEFwcG9pbnRtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwb2ludG1lbnRzLmZpbHRlcihhcHBvaW50bWVudCA9PiBhcHBvaW50bWVudFswXS5BcHBEYXRlID09PSBcIjEwLzE2LzIwMTdcIilbMF07XG4gICAgfVxufVxuIl19